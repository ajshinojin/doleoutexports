
<h1 class="prod mt-5 mb-4"><span class="">CART ITEMS</span></h1>


    <table class="container">
        <thead class="hd">

        
            <tr>
                <th scope="col">Item</th>
                <th scope="col">Details</th>
                <th scope="col">Price</th>
                
                <th scope="col">Quantity /Kg , /No</th>
               
            </tr>
        </thead>


        <tbody class="pr">

            {{#each products}}
            <tr>
                
                <td ><img style="width: 60px;height:55px" src="/product-images/{{this.product._id}}.jpg" alt=""></td>
                <td>{{this.product.Name}}<br> {{this.product.Description}}</td>
                <td>{{this.product.Price}}</td>
                
                
                <td class="sp">
                    <button class="cart-item-count mr-3" onclick="changeQuantity('{{this._id}}', '{{this.product._id}}',-1)">-</button>
                    <span  id="{{this.product._id}}"> {{this.quantity}}</span> 
                    <button class="cart-item-count ml-3" onclick="changeQuantity('{{this._id}}', '{{this.product._id}}',1)" >+</button>

                </td>
           


             </tr>

             {{/each}}
        </tbody>

   </table>
        
        <div class=" btb pb-5">
           
            <a href="/ask-price" class="  btn btn-success mt-2 " style="width:35%;">Ask price</a>
        </div>





<script>
    function changeQuantity(cartId,proId,count){

        let quantity=parseInt(document.getElementById (proId).innerHTML)
        count=parseInt(count)

        $.ajax({
            url:'/change-product-quantity',
            data:{
                cart:cartId,
                product:proId,
                count:count,
                quantity:quantity
            },
            method:'post',
            success:(response)=>{
                if(response.removeProduct){
                    alert("Product Removed from cart")
                    location.reload()
                }else{
                    document.getElementById(proId).innerHTML=quantity+count
                }
            }
        })
    }
</script>


<script>
    function deleteCart(cartId,proId){

        let quantity=parseInt(document.getElementById (proId).innerHTML)
        

        $.ajax({
            url:'/delete-cart',
            data:{
                cart:cartId,
                product:proId,
               
                quantity:quantity
            },
            method:'post',
            success:(response)=>{
                if(response.removeProduct){
                    alert("Product Removed from cart")
                    location.reload()
                }else{
                    document.getElementById(proId).innerHTML=quantity+count
                }
            }
        })
    }
</script>


    <style>
        /*	
	Side Navigation Menu V2, RWD
	===================
	Author: https://github.com/pablorgarcia
 */

@charset "UTF-8";
@import url(https://fonts.googleapis.com/css?family=Open+Sans:300,400,700);


.bt{
  font-size: 12px;
}
.btb{
    text-align: center;
    
}
body {
  
 
  line-height: 1em;
  color:white;
  background-color:#34405e;
}

h1 {
  font-size:2em; 
  font-weight: 300;
  line-height:1em;
  text-align: center;
    color: #c69963;
}

h2 {
  font-size:1em; 
  font-weight: 300;
  text-align: center;
  display: block;
  line-height:1em;
  padding-bottom: 2em;
  color: #427897;
}

h2 a {
  font-weight: 700;
  text-transform: uppercase;
  color: #c3c531;
  text-decoration: none;
}

.blue { color: #102e3b; }
.yellow { color: #FFF842; }

.container th h1 {
	  font-weight: bold;
	  font-size: 1em;
  text-align: left;
   color: #c69963;
}

.container td {
	  font-weight: normal;
	  font-size: 1em;
  -webkit-box-shadow: 0 2px 2px -2px #0E1119;
	   -moz-box-shadow: 0 2px 2px -2px #0E1119;
	        box-shadow: 0 2px 2px -2px #0E1119;
}

.container {
	  text-align: left;
	  overflow: hidden;
	  width: 95%;
	  margin: 0 auto;
  display: table;
  padding: 0 0 8em 0;
}

.container td, .container th {
	  padding-bottom: 2%;
	  padding-top: 2%;
  padding-left:2%;  
}

/* Background-color of the odd rows */
.container tr:nth-child(odd) {
	  background-color: #323C50;
}

/* Background-color of the even rows */
.container tr:nth-child(even) {
	  background-color: #2C3446;
}

.container th {
	  background-color: #1F2739;
}

.container td:first-child { color: #f6f7f2; }

.container tr:hover {
   background-color: #464A52;
-webkit-box-shadow: 0 6px 6px -6px #0E1119;
	   -moz-box-shadow: 0 6px 6px -6px #0E1119;
	        box-shadow: 0 6px 6px -6px #0E1119;
}

.container td:hover {
  background-color: #f0efde;
  color: #403E10;
  font-weight: bold;
 
  
  transition-delay: 0s;
	  transition-duration: 0.4s;
	  transition-property: all;
  transition-timing-function: line;
}

@media (max-width: 800px) {
.container td:nth-child(3),
.container th:nth-child(3) { display:none ; }
}


  @media(max-width:470px){
      .hd{
        font-size: 15px;
      }

      .pr{
        font-size: 14px;
      }

      .bt{
        font-size: 8px;
      }

      .prod{
        font-size: 2rem;
      }
  }

  @media(max-width:362px){
    .hd{
        font-size: 13px;
      }

      .pr{
        font-size: 12px;
      }

      .bt{
        font-size: 8px;
      }

  }

  @media(max-width:281px){
     .hd{
        font-size: 11px;
      }

      
      .pr{
        font-size: 9px;
      }

      
      .bt{
        font-size: 6px;
      }
  }
    </style>
